import{getDraggable as n}from"./dragdrop-manager/drag-utils.js";class d{#e;#m;#d;#t;#h;#n;#l;#i;#s;#o;constructor(t,i,h){this.#e=t,this.#m=t.getBoundingClientRect(),this.#d=i,this.#t=h,this.#h=this.#r.bind(this),this.#n=this.#a.bind(this),this.#l=this.#u.bind(this),this.#e.addEventListener("mousedown",this.#h),t.__resizeManager=this}dispose(){this.#e.removeEventListener("mousedown",this.#h),this.#h=null,this.#n=null,this.#l=null,delete this.#e.__resizeManager,this.#e=null,this.#d=null,this.#t=null,this.#m=null}#r(t){const i=n(t,{drag:{query:this.#d}});i!=null&&(t.preventDefault(),this.#i=i.parentElement||t.composedPath()[2],this.#t.zIndex!=null&&(this.#i.style.zIndex=this.#t.zIndex),this.#t.dropShadow==!0&&(this.#i.style.filter="var(--drop-shadow)"),this.#s=this.#i.getBoundingClientRect(),this.#o={x:t.clientX,y:t.clientY},this.#t.min=this.#t.min||{},this.#t.min.width=this.#t.min.width||this.#s.width,this.#t.min.height=this.#t.min.height||this.#s.height,this.#t.max=this.#t.max||{},this.#t.max.width=this.#t.max.width||Number.MAX_VALUE,this.#t.max.height=this.#t.max.height||Number.MAX_VALUE,document.addEventListener("mousemove",this.#n),document.addEventListener("mouseup",this.#l))}#a(t){let i=t.clientX-this.#o.x,h=t.clientY-this.#o.y;this.#t.lock_axis=="x"&&(h=0),this.#t.lock_axis=="y"&&(i=0);let s=this.#s.width+i-4,e=this.#s.height+h-4;s=s<this.#t.min.width?this.#t.min.width:s>this.#t.max.width?this.#t.max.width:s,e=e<this.#t.min.height?this.#t.min.height:e>this.#t.max.height?this.#t.max.height:e,this.#i.style.width=`${s}px`,this.#i.style.height=`${e}px`}#u(t){this.#t.zIndex!=null&&(this.#i.style.zIndex=""),this.#t.dropShadow==!0&&(this.#i.style.filter="");let i=this.#i;document.removeEventListener("mousemove",this.#n),document.removeEventListener("mouseup",this.#l),this.#i=null,this.#s=null,this.#o=null,this.#t.callback&&this.#t.callback(i)}}export{d as ResizeElementManager};
