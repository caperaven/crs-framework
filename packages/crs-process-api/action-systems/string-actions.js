class d{static async perform(a,t,r,s){await this[a.action]?.(a,t,r,s)}static async inflate(a,t,r,s){if(a.args.parameters==null)return a.args.template;let n=a.args.template,l=a.args.parameters,e=await _(n,l,t,r,s);return e.indexOf("&{")!=-1&&(e=f(e)),a.args.target!=null&&await crs.process.setValue(a.args.target,e,t,r,s),e}static async translate(a,t,r,s){let l=await crs.process.getValue(a.args.template,t,r,s);return l.indexOf("&{")!=-1&&(l=f(l)),a.args.target!=null&&await crs.process.setValue(a.args.target,l,t,r,s),l}static async to_array(a,t,r,s){let l=(await crs.process.getValue(a.args.source,t,r,s)).split(a.args.pattern);return a.args.target!=null&&await crs.process.setValue(a.args.target,l,t,r,s),l}static async from_array(a,t,r,s){let n=await crs.process.getValue(a.args.source,t,r,s),l=a.args.separator||"",e=n.join(l);return a.args.target!=null&&await crs.process.setValue(a.args.target,e,t,r,s),e}static async replace(a,t,r,s){let n=await crs.process.getValue(a.args.source,t,r,s);const l=await crs.process.getValue(a.args.pattern,t,r,s),e=await crs.process.getValue(a.args.value,t,r,s);let g=n.split(l).join(e);return a.args.target!=null&&await crs.process.setValue(a.args.target,g,t,r,s),g}static async get_query_string(a,t,r,s){const n=await crs.process.getValue(a.args.source,t,r,s),l=await crs.process.getValue(a.args.complex_parameters,t,r,s);if((n||"").trim()==="")return;let e;const g=n.includes("?")?n.split("?")[1]:n,u=new URLSearchParams(g);for(const[c,o]of u)if(!((c||"").trim()===""||(o||"").trim()==="")){if((l||[]).includes(c)){const y=o.split(";");for(const V of y){const w=await this.get_query_string({args:{source:V}});w!=null&&(e=e||{},e[c]=e[c]||{},Object.assign(e[c],w))}continue}e=e||{},e[c]=o}return a.args.target!=null&&e!=null&&await crs.process.setValue(a.args.target,e,t,r,s),e}static async template(a,t,r,s){let n=await crs.process.getValue(a.args.template,t,r,s);const l=await crs.process.getValue(a.args.options,t,r,s);for(const e of Object.keys(l))n=n.replaceAll(`__${e}__`,l[e]);return a.args.target!=null&&await crs.process.setValue(a.args.target,n,t,r,s),n}static async slice(a,t,r,s){const n=await crs.process.getValue(a.args.value,t,r,s),l=await crs.process.getValue(a.args.index||0,t,r,s),e=await crs.process.getValue(a.args.length,t,r,s),g=await crs.process.getValue(a.args.overflow||null,t,r,s),u=l+e;let c=n.substring(l,u);return g==="ellipsis"&&n.length>c.length&&(c=`${c.substring(0,e-3)}...`),a.args.target!=null&&await crs.process.setValue(a.args.target,c,t,r,s),c}}async function _(i,a,t,r,s){i=i.split("${").join("${context."),a=await p(a,t,r,s);let n=new Function("context",["return `",i,"`;"].join("")),l=n(a);return n=null,l}async function p(i,a,t,r){const s=Object.keys(i);for(let n of s){let l=i[n];i[n]=await crs.process.getValue(l,a,t,r)}return i}async function f(i){const a=i.indexOf("&{"),t=i.indexOf("}",a+1),r=i.substring(a+2,t),s=await crsbinding.translations.get(r);return i=i.split(`&{${r}}`).join(s),i.indexOf("&{")!=-1?f(i):i}crs.intent.string=d;export{d as StringActions};
