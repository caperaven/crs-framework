class l{static async perform(i,n,s,o,r){const c=u(i.args.condition,s)(n,s,o);if(c&&i.pass_step!=null){const e=await crs.getNextStep(s,i.pass_step,r);await crs.process.runStep(e,n,s,o,r)}if(!c&&i.fail_step!=null){const e=await crs.getNextStep(s,i.fail_step,r);await crs.process.runStep(e,n,s,o,r)}return i.args.target!=null&&await crs.process.setValue(i.args.target,c,n,s,o),c}}function u(t,i){let n=t;for(const o of Object.keys(i.prefixes))n=n.split(o).join(i.prefixes[o]);n.indexOf("$binding")!=-1&&(n=f(n,i.parameters.bId)),n=n.split("$").join("");const s=`return ${n}`;return new Function("context","process","item",s)}function f(t,i){const n=t.indexOf("$binding"),s=t.indexOf(" ",n),r=t.substring(n,s).split("."),a=r[1],c=[`crsbinding.data.getProperty(${i}, "${a}")`];r.length>2&&(r.splice(0,2),c.push(r.join(".")));const e=Array.from(t);return e.splice(n,s-n,c.join(".")),t=e.join(""),t.indexOf("$binding")!=-1&&(t=f(t,i)),t}crs.intent.condition=l;export{l as ConditionActions};
