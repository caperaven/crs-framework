var nt=Object.defineProperty;var D=(e,t)=>()=>(e&&(t=e(e=0)),t);var rt=(e,t)=>{for(var n in t)nt(e,n,{get:t[n],enumerable:!0})};var C,M=D(()=>{C=class{static append(t,...n){let r=crs.binding.elements[t];if(r==null)return;let s=crs.binding.inflation.store.get(t),i=document.createDocumentFragment();for(let a of n){let o=s.template.content.cloneNode(!0);s.fn(o,a),i.appendChild(o)}r.appendChild(i)}static splice(t,n,r,...s){let i=crs.binding.elements[t];if(i==null)return;for(let l=n;l<n+r&&!(l>i.children.length);l++)i.children[l]&&i.removeChild(i.children[l]);let a=crs.binding.inflation.store.get(t),o=document.createDocumentFragment();for(let l of s||[]){let f=a.template.content.cloneNode(!0);a.fn(f,l),o.appendChild(f)}let u=i.children[n];i.insertBefore(o,u)}static pop(t){let n=crs.binding.elements[t];n!=null&&n.lastElementChild&&n.removeChild(n.lastElementChild)}static shift(t){let n=crs.binding.elements[t];n!=null&&n.firstElementChild&&n.removeChild(n.firstElementChild)}};crs.binding.dom||={};crs.binding.dom.collection=C});var U={};rt(U,{default:()=>Y});function g(e){let t=this.__bid,n=this.__property;if(t==null||n==null)return;let r=crs.binding.data.getCallbacks(t,n);for(let s of r)e(s)}function Y(e){return new Proxy(e,it)}var m,it,V=D(()=>{M();m=class{static push(...t){this.push(...t),g.call(this,n=>{crs.binding.dom.collection.append(n,...t)})}static splice(t,n,...r){this.splice(t,n,...r),g.call(this,s=>{crs.binding.dom.collection.splice(s,t,n,...r)})}static shift(){this.shift(),g.call(this,t=>{crs.binding.dom.collection.shift(t)})}static pop(){this.pop(),g.call(this,t=>{crs.binding.dom.collection.pop(t)})}};it={get(e,t,n){return m[t]?m[t].bind(e):e[t]}}});var h=class{#t={};#e={};#s={};#n=[];#r=[];#i=[];get attrProviders(){return this.#e}get textProviders(){return this.#n}get elementProviders(){return this.#s}constructor(t,n){for(let r of Object.keys(t))this.addAttributeProvider(r,t[r]);for(let r of Object.keys(n))this.addElementProvider(r,n[r])}async#o(t){return t=t.replace("$root",crs.binding.root),new(await import(t)).default}async getAttrModule(t){let n=this.#e[t];return typeof n!="string"?n:(this.#e[t]=await this.#o(n),this.#e[t])}addAttributeProvider(t,n){this.#e[t]=n,t.indexOf(".")!=-1&&this.#r.push(t)}addElementProvider(t,n){this.#s[t]=n,this.#i.push(t)}async addTextProvider(t){this.#n.push(await this.#o(t))}async getAttrProvider(t){if(t==="ref")return await this.getAttrModule("ref");if(t.indexOf(".")==-1)return null;if(this.#e[t]!=null)return await this.getAttrModule(t);for(let n of this.#r){if(n[0]==="^"){let r=this.#t[n];if(r==null&&(r=new RegExp(n),this.#t[n]=r),r.test(t))return await this.getAttrModule(n)}if(t.indexOf(n)!=-1)return await this.getAttrModule(n)}}async getElementProvider(t){for(let n of this.#i)if(t.matches(n))return typeof this.#s[n]=="object"?this.#s[n]:(this.#s[n]=await this.#o(this.#s[n]),this.#s[n])}async getTextProviders(){return this.#n}async update(t,...n){let r=crs.binding.elements[t];if(r.__repeat_container===!0&&crs.binding.providers.elementProviders["template[for]"].update(t),r.__events!=null&&r.__events.indexOf("change")!=-1){let s=this.#e[".bind"],i=this.#e[".one-way"];typeof s=="object"&&s.update(t),typeof i=="object"&&i.update(t)}for(let s of this.#n)s.store[t]!=null&&s.update(t);for(let s of this.#r){let i=this.#e[s];typeof i!="string"&&i.store?.[t]!=null&&i.update?.(t,...n)}}async updateProviders(t,...n){for(let r of n){let s;r===".textContent"?s=this.#n[0]:s=this.#e[r]||this.#s[r],s.update?.(t)}}async clear(t){for(let n of this.#n)n.clear(t);for(let n of this.#r)this.#e[n].clear?.(t)}};var st=["STYLE","CRS-ROUTER","SCRIPT"];async function w(e,t,n){if(e.__inflated===!0||st.indexOf(e.nodeName)!=-1)return;e.dataset.ref!=null&&(t[e.dataset.ref]=e);let r=n?.ctxName||"context",s=await crs.binding.providers.getElementProvider(e);if(s!=null)return s.parse(e,t,r);if(!F(e,crs.binding.ignore)&&(await crs.binding.parsers.parseAttributes(e,t,r),!F(e,crs.binding.ignoreChildren))){if(e.children?.length>0)return await crs.binding.parsers.parseElements(e.children,t,n);for(let i of crs.binding.providers.textProviders)await i.parseElement(e,t,r)}}function F(e,t){for(let n of t)if(e.matches(n))return!0;return!1}async function T(e,t,n){if(e!=null)for(let r of e)await crs.binding.parsers.parseElement(r,t,n)}async function _(e,t,n,r){if(e.ownerElement==null)return;let s=await crs.binding.providers.getAttrProvider(e.name);if(s==null)return;let i=e.ownerElement;crs.binding.utils.markElement(i,t),await s.parse(e,t,n,r)}async function $(e,t,n,r){if(e.attributes==null)return;let s=Array.from(e.attributes);for(let i of s)await crs.binding.parsers.parseAttribute(i,t,n,r)}var b=class{#t=1;#e={};#s={0:{name:"global",type:"data",data:{}}};#n={};#r={};#i={};#o(){let t=this.#t;return this.#t+=1,t}#a(t){return typeof t=="object"?t.bid:t}get globals(){return this.#s[0].data}async#l(t,n){if(this.#n[t]==null)return;let r=this.#n[t]?.[n];if(r!=null){for(let s of r.values())typeof s=="function"?await s():await crs.binding.providers.update(s,n);return}for(let s of Object.keys(this.#n[t]))s.indexOf(n)==0&&await this.#l(t,s)}setCallback(t,n,r,s){let i=this.#n[n]||={};for(let a of r){if(a.indexOf(GLOBALS)!==-1){this.setCallback(t,0,[a.replace(GLOBALS,"")],s);continue}i[a]==null&&(i[a]=new Set),i[a].add(t),this.#i[t]||=new Set,this.#i[t].add(s)}}addContextCallback(t,n){this.#r[t]==null&&(this.#r[t]=new Set),this.#r[t].add(n)}removeContextCallback(t,n){this.#r[t]!=null&&(this.#r[t].delete(n),this.#r[t].size==0&&delete this.#r[t])}addObject(t,n={}){let r=this.#o();return this.#s[r]={name:t,type:"data",data:n},this.#n[r]={},r}addContext(t,n){this.#e[t]=n}getContext(t){return this.#e[t]}getData(t){return t=this.#a(t),this.#s[t]}getCallbacks(t,n){let r=this.#n[t]?.[n];return r==null?[]:Array.from(r)}getDataForElement(t){let n=t?.__bid;return n==null?void 0:crs.binding.data.getData(n).data}remove(t){t=this.#a(t);let n=this.#e[t];if(n==null)return;if(n.boundElements!=null){for(let s of n.boundElements)delete this.#i[s];delete n.boundElements}crs.binding.utils.disposeProperties(this.#s[t]),crs.binding.utils.disposeProperties(this.#e[t]),crs.binding.utils.disposeProperties(this.#n[t]),delete this.#s[t],delete this.#e[t],delete this.#n[t],delete this.#r[t],crs.binding.dataDef!=null&&crs.binding.dataDef.remove(t);let r=crs.binding.providers.attrProviders[".changed."];typeof r!="string"&&r.clear(t)}getProperty(t,n){return n==="bid"?t:(n.indexOf(GLOBALS)!==-1&&(t=0,n=n.replace(GLOBALS,"")),t=this.#a(t),crs.binding.utils.getValueOnPath(this.getData(t)?.data,n))}async setProperty(t,n,r){let s=this.getProperty(t,n),i=n;if(i.indexOf(GLOBALS)!==-1&&(t=0,i=n.replace(GLOBALS,"")),t=this.#a(t),Array.isArray(r)&&(r.__bid=t,r.__property=i,r=(await Promise.resolve().then(()=>(V(),U))).default(r)),crs.binding.utils.setValueOnPath(this.getData(t)?.data,i,r),await this.#l(t,i),t!==0){let o=this.#e[t];o!=null&&(o.propertyChanged?.(n,r,s),o[`${n}Changed`]?.(r,s))}if(this.#r[t]!=null)for(let o of this.#r[t])o?.(n,r,s);crs.binding.dataDef!=null&&(await crs.binding.dataDef.automateValues(t,n),await crs.binding.dataDef.automateValidations(t,n));let a=crs.binding.providers.attrProviders[".changed."];typeof a!="string"&&await a.update(t,n)}async updateProperty(t,n,r){let s=this.getProperty(t,n);s=await r(s),await this.setProperty(t,n,s)}setName(t,n){t=this.#a(t);let r=crs.binding.data.getData(t);r.name=n}async updateElement(t){let n=t.__bid,r=t.__uuid;if(!(n==null||r==null))for(let s of Object.keys(this.#n[n]))await crs.binding.providers.update(r,s)}async updateContext(t){let n=this.getContext(t);if(!(n==null||n.boundElements==null))for(let r of n.boundElements){let s=this.#i[r];if(s==null)continue;let i=Array.from(s);await crs.binding.providers.updateProviders(r,...i)}}async updateUI(t,n){let r=this.getContext(t);r==null||r.boundElements==null||await this.#l(t,n)}async addCallback(t,n,r){let s=this.#n[t];s[n]==null&&(s[n]=new Set),s[n].add(r)}async removeCallback(t,n,r){let s=this.#n[t];s[n]!=null&&s[n].delete(r)}};var c=Object.freeze({WORD:"word",LITERAL:"literal",FUNCTION:"function",PROPERTY:"property",OBJECT:"object",KEYWORD:"keyword",OPERATOR:"operator",NUMBER:"number",SPACE:"space",STRING:"string"});function q(e,t){let n=[],r=[],s=0;function i(o,u){if(r.length>0){let l=r.join("");a(l)}n.push({type:o,value:u})}function a(o){let u=c.WORD;z.indexOf(o)!=-1&&(u=c.KEYWORD),isNaN(Number(o))==!1&&(u=c.NUMBER),n.push({type:u,value:o}),r.length=0}for(s;s<e.length;s++){let o=e[s];if(o==" "){i(c.SPACE," ");continue}if(o=="`"){i(c.LITERAL,"`");continue}if(o=="$"&&e[s+1]=="{"){i(c.KEYWORD,"${"),s++;continue}if(o=="'"||o=='"'){let u=s+e.length-s,l=!1;if(e[s+1]==null){i(c.STRING,o);break}let f=s+1;for(f;f<u;f++){if(e[f]=="$"&&e[f+1]=="{"){l=!0;break}if(e[f]==o){let et=e.substring(s,f+1);i(c.STRING,et);break}}l==!0?i(c.STRING,o):s=f;continue}if(z.indexOf(o)!=-1){i(c.KEYWORD,o);continue}if(B.indexOf(o)!=-1){for(let u=s;u<s+4;u++){let l=e[u];if(B.indexOf(l)==-1){let f=e.substring(s,u);i(c.OPERATOR,f),s=u-1;break}}continue}r.push(o)}return r.length>0&&a(r.join("")),ot(n,t)}function ot(e,t){if(e.length==1&&e[0].type==c.WORD)return e[0].type=c.PROPERTY,e;let n=[],r=0;for(;e[r]!=null;){let s=e[r],i=n.length==0?"none":n[n.length-1],a=s.value.indexOf(".");if(s.type==c.WORD)if(i==c.LITERAL){if(s.value[0]=="."&&e[r+1].value=="("){s.type=c.FUNCTION,r++;continue}s.type=c.PROPERTY}else a!=-1?e[r-1]?.value===")"&&a===0?s.type=c.FUNCTION:s.type=c.PROPERTY:v(e[r+1])||v(e[r+2])?t!==!0&&i!==c.OBJECT&&(s.type=c.PROPERTY):t!==!0&&v(e[r-1])||v(e[r-2])?i!==c.OBJECT&&(s.type=c.PROPERTY):r===0&&e[r+1]?.value==="("&&(s.type=c.PROPERTY);if(s.type==c.KEYWORD&&s.value=="("&&e[r-1]&&e[r-1].type==c.PROPERTY&&e[r-1].value[0]!="$"){let o=e[r-1].value;if(o.indexOf(".")==-1)e[r-1].type=c.FUNCTION;else{let u=o.length-1;for(let l=o.length-1;l>=0;l--)if(o[l]=="."){u=l;break}if(u>0){let l=o.substring(0,u),f=o.substring(u,o.length);e[r-1].value=l,e.splice(r,0,{type:c.FUNCTION,value:f}),r++}else e[r-1].type=c.FUNCTION}}s.value=="${"?n.push(c.LITERAL):s.value=="{"?n.push(c.OBJECT):s.value=="}"&&n.pop(),r++}return e[0].type===c.FUNCTION&&(e[0].type=c.PROPERTY),e}function v(e){return e==null?!1:e.type==c.OPERATOR}var B=["=","!","<",">","+","-","*","/","&","|","?",":"],z=["{","}","(",")",",","true","false","null","undefined","[]"];var at=["false","true","null"];async function R(e,t="context"){let n=!1;if(typeof e=="string"&&e.indexOf("$html")!=-1&&(n=!0,e=e.split("$html.").join("")),e==null||e=="null"||e=="undefined"||at.indexOf(e.toString())!=-1||isNaN(e)==!1||e.trim()==t)return{isLiteral:!0,expression:e,isHTML:n};if(t!="context"==!0&&e==["${",t,"}"].join(""))return{isLiteral:!0,expression:e};let s=new Set,i=e.indexOf("${")!=-1||e.indexOf("&{")!=-1,a=q(e,i),o=[];for(let l of a)l.type=="property"?(l.value.indexOf("$globals")!=-1?o.push(l.value.replace("$globals","crs.binding.data.globals")):l.value.indexOf("$event")!=-1?o.push(l.value.replace("$event","event")):l.value.indexOf("$context")!=-1?o.push(l.value.replace("$context","context")):l.value.indexOf("$data")!=-1?o.push(l.value.replace("$data","crs.binding.data.getValue")):l.value.indexOf("$parent")!=-1?o.push(l.value.replace("$parent","parent")):t!=="context"&&l.value.indexOf(`${t}.`)!=-1||l.value==="new"?o.push(l.value):o.push(`${t}.${l.value}`),ut(s,l.value,t)):o.push(l.value);let u=o.join("").replaceAll("context.[","[").replaceAll("context.]","]");return u=await crs.binding.expression.translateFactory(u),{isLiteral:i,isHTML:n,expression:u,properties:Array.from(s)}}var lt=[".trim",".toLowerCase","toUpperCase"],ct=["$data","$event","[","]"];function ut(e,t,n){if(t.length==0)return;for(let i of ct)if(t.indexOf(i)!=-1)return;let r=t,s=`${n}.`;r.indexOf(s)==0&&(r=r.replace(s,""));for(let i of lt)r.indexOf(i)!=-1&&(r=r.split(i).join(""));e.add(r)}async function A(e){return e?.length>0&&e.indexOf("&{")==-1?e:G(e.split("")).join("")}function G(e){let t=e.indexOf("&");if(t==-1||e[t+1]!="{")return e;let n=e.indexOf("}",t),r=e.slice(t+2,n).join(""),s=["${await crs.binding.translations.get('",r.replace("context.",""),"')}"].join("");return e.splice(t,r.length+3,s),G(e)}async function j(e,t,n){let r=n?.ctxName||"context",s=`${r}:${e}`;if(crs.binding.functions.has(s)){let l=crs.binding.functions.get(s);return l.count+=1,l}t=t||[];let i=n?.sanitize??!0,a,o=e;i==!0?(a=await crs.binding.expression.sanitize(e,r),o=a.isLiteral===!0?["return `",a.expression,"`"].join(""):["return ",a.expression].join("")):a={expression:e};let u={key:s,function:new crs.classes.AsyncFunction(r,...t,o),parameters:a,count:1};return crs.binding.functions.set(s,u),u}function S(e){if(e==null||typeof e!="object")return;let t=e.key;if(crs.binding.functions.has(t)){let n=crs.binding.functions.get(t);n.count-=1,n.count==0&&(crs.binding.utils.disposeProperties(n),crs.binding.functions.delete(t))}}var ft=["_element"];function d(e){if(e==null||e.autoDispose==!1||typeof e!="object"||Object.isFrozen(e))return;if(Array.isArray(e))return W(e);if(e.constructor.name==="Set"||e.constructor.name==="Map")return K(e);let t=Object.getOwnPropertyNames(e).filter(n=>ft.indexOf(n)==-1);for(let n of t){let r=e[n];if(r!=null){typeof r=="object"&&(Array.isArray(r)?W(r):r.constructor.name==="Set"||r.constructor.name==="Map"?K(r):(r.dispose!=null&&r.dispose(),d(r)));try{r=null,delete e[n]}catch{}}}}function W(e){if(e.length!==0){for(let t of e)d(t);e=null}}function K(e){e.forEach(t=>d(t)),e.clear(),e=null}function L(e,t){if(e==null||(t||"").length==0)return;if(t.indexOf(".")==-1)return e[t];let n=t.split("."),r=n.pop();for(let s of n)if(e=e[s],e==null)return null;return e[r]}function k(e){if(e==null)return;if(e.endsWith("/"))return e;let t=e.split("/");return t.pop(),`${t.join("/")}/`}function I(e,t,n){if(e==null||(t||"").length==0)return;let r=t.split("."),s=r.pop();for(let i of r)e=e[i]||={};e[s]=n}var p=class{#t={};async add(t,n){H(n||"",t,this.#t)}async delete(t){let n=`${t}.`,r=Object.keys(this.#t).filter(s=>s.indexOf(n)===0);for(let s of r)delete this.#t[s]}async parseElement(t){t.children.length==0&&t.textContent.indexOf("&{")!=-1&&(t.textContent=await this.get_with_markup(t.textContent.trim()));for(let n of t.attributes||[])await this.parseAttribute(n);for(let n of t.children||[])await this.parseElement(n)}async parseAttribute(t){t.value.indexOf("&{")!==-1&&(t.value=await this.get_with_markup(t.value))}async get(t){let n=this.#t[t];return n!=null||(n=this.fetch==null?null:await this.fetch(t),n!=null&&(this.#t[t]=n)),n}async get_with_markup(t){return t=t.split("&{").join("").split("}").join(""),await this.get(t)}};function H(e,t,n){if(typeof t=="string")e[0]==="."&&(e=e.substring(1)),n[e]=t;else{let r=Object.keys(t);for(let s of r)H(`${e}.${s}`,t[s],n)}}function J(e,t){if(e.__uuid)return e.__uuid;let n=t.bid;return e.__uuid==null&&(e.__uuid||=crypto.randomUUID(),crs.binding.elements[e.__uuid]=e),e.__bid||=n,t.boundElements||=new Set,t.boundElements.add(e.__uuid),e.__uuid}function N(e){if(e.nodeName==="STYLE")return;e.children.length>0&&dt(e.children);let t=e.__uuid;t!=null&&(crs.binding.providers.clear(t).catch(n=>console.error(n)),crs.binding.elements[t]&&delete crs.binding.elements[t],crs.binding.utils.disposeProperties(e))}function dt(e){for(let t of e)N(t)}function Q(e){e._domEvents=[],e.registerEvent=pt,e.unregisterEvent=ht}function X(e){if(e._domEvents!=null){for(let t of e._domEvents)e.removeEventListener(t.event,t.callback),delete t.element,delete t.callback,delete t.event;e._domEvents.length=0,delete e._domEvents,delete e.registerEvent,delete e.unregisterEvent}}function pt(e,t,n,r=null){if(this._domEvents.find(a=>a.element==e&&a.event==t&&a.callback==n)!=null)return;let i=e.shadowRoot||e;i.addEventListener(t,n,r),this._domEvents.push({element:i,event:t,callback:n})}function ht(e,t,n){let r=this._domEvents.find(i=>i.element==e&&i.event==t&&i.callback==n);if(r==null)return;(e.shadowRoot||e).removeEventListener(r.event,r.callback),this._domEvents.splice(this._domEvents.indexOf(r),1),delete r.element,delete r.callback,delete r.event}var y=class{#t={};get(t,n){return new Promise(async r=>{if(this.#t[t]||={count:0,queue:[],loading:!1,template:null},this.#t[t].count+=1,this.#t[t].template==null&&this.#t[t].loading===!1){this.#t[t].loading=!0;let s=await fetch(n).then(a=>a.text()),i=document.createElement("template");i.innerHTML=s,this.#t[t].template={template:i,html:s};for(let a of this.#t[t].queue)a();delete this.#t[t].loading,delete this.#t[t].queue,r(s)}this.#t[t].template==null?this.#t[t].queue.push(()=>{r(this.#t[t].template.html)}):r(this.#t[t].template.html)})}async createStoreFromElement(t,n){let r=this.#t[t]||={count:0,template:{}},s=n.querySelectorAll("template"),i=null;for(let a of s){let o=a.id||a.dataset.id;r.template[o]=a,a.dataset.default==="true"&&(i=o)}return i}async getStoreTemplate(t,n){return this.#t[t]?.template[n]?.content.cloneNode(!0)}async remove(t){this.#t[t]!=null&&(this.#t[t].count-=1,this.#t[t].count===0&&(this.#t[t].count=null,this.#t[t].template.template=null,this.#t[t].template.html=null,this.#t[t].template=null,delete this.#t[t]))}};var E=class{#t={};add(t,n,r){this.#t[t]={template:n,fn:r}}get(t){return this.#t[t]}remove(t){let n=this.#t[t];delete this.#t[t],n.template=null,n.fn=null}};globalThis.requestIdleCallback=globalThis.requestIdleCallback||function(e){let t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)};globalThis.cancelIdleCallback=globalThis.cancelIdleCallback||function(e){clearTimeout(e)};var O=class{#t=[];constructor(){this.processing=!1}dispose(){this.#t=null}async#e(){this.processing=!0;try{requestIdleCallback(async()=>{for(;this.#t.length>0;){let t=this.#t.shift();try{await t()}catch(n){console.error(n)}}},{timeout:1e3})}finally{this.processing=!1}}async add(t){if(typeof t=="function"){if(requestIdleCallback==null)return await t();this.#t.push(t),this.processing!=!0&&await this.#e()}}};var P=class{#t={};#e=this.#n.bind(this);#s=this.callEvent.bind(this);get store(){return this.#t}async#n(t){let n=gt(t);if(n.length!==0)for(let r of n){let s=r.__uuid,a=this.#t[t.type][s];if(a!=null){let o=r.__bid;if(Array.isArray(a)){for(let u of a)await this.#r(u,o,r);continue}await this.#r(a,o,r)}}}async#r(t,n,r){let s=t.provider;s=s.replaceAll("\\",""),await crs.binding.providers.attrProviders[s].onEvent?.(event,n,t,r)}async callEvent(t){let n=t.composedPath()[0];if(!(n instanceof HTMLInputElement))return;let r=n.__uuid,s=this.#t[t.type],i=crs.binding.elements[r],a=s[r];if(a!=null){Array.isArray(a)||(a=[a]);for(let o of a)await this.#r(o,i.__bid,i)}}getIntent(t,n){return this.#t[t]?.[n]}register(t,n,r,s=!0){let i=crs.binding.elements[n],a=i.getRootNode();if(t==="change"&&i instanceof HTMLInputElement&&a instanceof ShadowRoot&&a.host.registerEvent!=null&&a.host.registerEvent(a,t,this.#s),this.#t[t]==null&&(document.addEventListener(t,this.#e,{capture:!0,passive:!0}),this.#t[t]={}),s){this.#t[t][n]||=[],this.#t[t][n].push(r);return}this.#t[t][n]=r}clear(t){let n=crs.binding.elements[t];if(n?.__events==null)return;let r=n.__events;for(let s of r)delete this.#t[s][t]}};function gt(e){return e.composedPath().filter(t=>t.__uuid!=null)}function Z(e){let t={path:e.trim()};return mt(t),bt(t),vt(t),t}function mt(e){e.path[0]=="$"&&e.path[1]=="{"&&(e.path=e.path.substring(2,e.path.length-1))}function bt(e){let t=yt(e.path,":");e.path=t[0],e.converter=t[1]}function vt(e){let t=e.converter.indexOf("("),n=e.converter.indexOf(")"),r=e.converter.substring(t+1,n).split("'").join('"'),s=e.converter.substring(0,t),i=e.converter.substring(n+1,e.converter.length);e.converter=s,e.parameter=r.length==0?null:JSON.parse(r),e.postExp=i}function yt(e,t){let n=e.indexOf(t),r=[];return r.push(e.substring(0,n)),r.push(e.substring(n+1,e.length)),r}function tt(e,t){let n=Et(e),r=["","."],s=t.split("./"),i=n.split("/");i.pop();let a=0;for(let l=0;l<s.length;l++){let f=s[l];if(r.indexOf(f)===-1)break;f=="."&&i.pop(),a+=1}s.splice(0,a);let o=s.join("/");return`${i.join("/")}/${o}`}function Et(e){if(e==null||e[e.length-1]=="/")return e;let t=e.split("/");return t.pop(),`${t.join("/")}/`}var x=class{#t=[];#e={};add(t,n){this.#t.push(t),this.#e[t]=n}remove(t){this.#t.splice(this.#t.indexOf(t),1),delete this.#e[t]}async executeTemplateAction(t,n){if(t.attributes.length!==0){for(let r of this.#t)if(t.getAttribute(r)!=null){let s=this.#e[r];await s(t,n)}}}};globalThis.GLOBALS="$globals.";globalThis.crs||={};globalThis.crs.classes||={};globalThis.crs.classes.AsyncFunction=Object.getPrototypeOf(async function(){}).constructor;globalThis.crs.binding={root:import.meta.url.replace("/crs-binding.js",""),idleTaskManager:new O,eventStore:new P,templateProviders:new x,ignore:["TEMPLATE","SCRIPT","STYLE"],ignoreChildren:["PERSPECTIVE-ELEMENT"],data:new b,translations:new p,functions:new Map,elements:{},dom:{enableEvents:Q,disableEvents:X},providers:new h({"^style..*.if$":"$root/providers/attributes/style-if.js","^style..*.case$":"$root/providers/attributes/style-case.js","^(keydown|keyup)..+..*$":"$root/providers/events/keyboard-event.js","classlist.if":"$root/providers/attributes/classlist-if.js","classlist.case":"$root/providers/attributes/classlist-case.js","classlist.toggle":"$root/providers/attributes/classlist-toggle.js",".bind":"$root/providers/properties/bind.js",".two-way":"$root/providers/properties/bind.js",".one-way":"$root/providers/properties/one-way.js",".once":"$root/providers/properties/once.js",".changed.":"$root/providers/properties/changed.js",".setvalue":"$root/providers/attributes/set-value.js",".attr.toggle":"$root/providers/attributes/attr-toggle.js",".attr":"$root/providers/attributes/attr.js",".if":"$root/providers/attributes/attr-if.js",".case":"$root/providers/attributes/attr-case.js","style.":"$root/providers/attributes/style-property.js",ref:"$root/providers/attributes/ref.js",".call":"$root/providers/attributes/call.js",".emit":"$root/providers/attributes/emit.js",".post":"$root/providers/attributes/post.js",".process":"$root/providers/attributes/process.js"},{"template[for]":"$root/providers/element/template-repeat-for.js","template[src]":"$root/providers/element/template-src.js",template:"$root/providers/element/template.js"}),parsers:{parseElement:w,parseElements:T,parseAttribute:_,parseAttributes:$},expression:{sanitize:R,compile:j,release:S,translateFactory:A},utils:{disposeProperties:d,getValueOnPath:L,setValueOnPath:I,getPathOfFile:k,markElement:J,unmarkElement:N,getConverterParts:Z,relativePathFrom:tt},inflation:{store:new E},templates:new y};Object.defineProperty(globalThis.crs.binding,"$global",{value:0,writable:!1});await crs.binding.providers.addTextProvider("$root/providers/text/text.js");
/**
 * @file crs-binding.js - This is the main file of the binding engine.
 * All the core features are defined here and exported to the global scope.
 *
 * @version 1.0.0
 * @license MIT for free and opensource software
 */
