async function $(i,e="context"){const t=[],n=[];return i.nodeName==="TEMPLATE"&&(i=i.content.cloneNode(!0).firstElementChild),i.nodeName!="#document-fragment"&&await d("element",i,n,t,e),i.children.length===0?await x("element",i,t,e):await p("element",i,n,t,e),new Function("element",e,[...n,...t].join(`
`))}async function x(i,e,t,n){const o=await crs.binding.expression.sanitize(e.textContent.trim(),n);t.push([i,".textContent = `",o.expression,"`;"].join(""))}async function p(i,e,t,n,o){for(let s=0;s<e.children.length;s++){const a=e.children[s];if(a.children.length>0)await p(`${i}.children[${s}]`,a,t,n,o);else{const c=await crs.binding.expression.sanitize(a.textContent.trim(),o);n.push([i,".children",`[${s}].textContent = `,"`",c.expression,"`;"].join(""))}await d(`${i}.children[${s}]`,e.children[s],t,n,o)}}async function d(i,e,t,n,o){if(!(e instanceof DocumentFragment))for(const s of e.attributes)if(s.nodeValue.indexOf("${")!=-1){t.push(`${i}.removeAttribute("${s.nodeName}");`);const a=await crs.binding.expression.sanitize(s.nodeValue.trim(),o);n.push([`${i}.setAttribute("${s.nodeName}",`,"`",a.expression,"`",");"].join(""))}else s.nodeName.indexOf("style.")!=-1?await y(s,i,t,n,o):s.nodeName.indexOf("classlist.case")!=-1?await h(s,i,t,n,o):s.nodeName.indexOf("classlist.if")!=-1?await m(s,i,t,n,o):s.nodeName.indexOf(".if")!=-1?await w(s,i,t,n,o):(s.nodeName.indexOf(".attr")!=-1||s.nodeName.indexOf(".one-way")!=-1)&&await b(s,i,t,n,o)}async function h(i,e,t,n,o){const a=(await crs.binding.expression.sanitize(i.nodeValue.trim(),o)).expression.split(","),c=[];for(const u of a){const l=u.split("?"),f=l[0].trim(),r=(l[1]||l[0]).split(":");c.push(...r),n.push(`if (${f}) {`),n.push(`    ${e}.classList.add(${r[0].trim()});`),n.push("}"),r.length>1&&(n.push("else {"),n.push(`    ${e}.classList.add(${r[0].trim()});`),n.push("}"))}t.push(`${e}.classList.remove(${c.join(",")});`)}async function m(i,e,t,n,o){const s=i.nodeValue.split("?")[1].split(":");t.push(`${e}.classList.remove(${s.join(",")});`);const a=await crs.binding.expression.sanitize(i.nodeValue.trim(),o);n.push([`${e}.classList.add(`,a.expression,");"].join(""))}async function w(i,e,t,n,o){t.push(`${e}.removeAttribute("${i.nodeName}");`);const s=await crs.binding.expression.sanitize(i.nodeValue.trim(),o);n.push([`${e}.setAttribute("${i.nodeName.replace(".if","")}",`,s.expression,");"].join(""))}async function b(i,e,t,n,o){t.push(`${e}.removeAttribute("${i.nodeName}");`);const s=await crs.binding.expression.sanitize(i.nodeValue.trim(),o);n.push([`${e}.setAttribute("${i.nodeName.replace(".attr","")}",`,s.expression,");"].join(""))}async function y(i,e,t,n,o){const s=i.nodeName.split("."),a=await crs.binding.expression.sanitize(i.nodeValue.trim(),o);if(t.push(`${e}.style.${s[1]} = "";`),i.nodeName.indexOf(".case")==-1)n.push([`${e}.style.${s[1]} =`,a.expression,";"].join(""));else{const c=a.expression.split(",");for(const u of c){if(u.indexOf("context.default")!=-1){t.push(`${e}.style.${s[1]} = ${u.split(":")[1].trim()};`);continue}const l=u.split("?"),f=l[0].trim(),r=(l[1]||l[0]).split(":");n.push(`if (${f}) {`),n.push(`    ${e}.style.${s[1]} = ${r[0].trim()};`),n.push("}"),r.length>1&&(n.push("else {"),n.push(`    ${e}.style.${s[1]} = ${r[1].trim()};`),n.push("}"))}}}crs.binding.expression.inflationFactory=$;export{$ as inflationFactory};
