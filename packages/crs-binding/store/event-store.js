class d{#t={};#n=this.#r.bind(this);#s=this.callEvent.bind(this);get store(){return this.#t}async#r(t){const e=l(t);if(e.length!==0)for(const s of e){const r=s.__uuid,n=this.#t[t.type][r];if(n!=null){const o=s.__bid;if(Array.isArray(n)){for(const c of n)await this.#e(c,o,s);continue}await this.#e(n,o,s)}}}async#e(t,e,s){let r=t.provider;r=r.replaceAll("\\",""),await crs.binding.providers.attrProviders[r].onEvent?.(event,e,t,s)}async callEvent(t){const e=t.composedPath()[0];if(!(e instanceof HTMLInputElement))return;const s=e.__uuid,r=this.#t[t.type],i=crs.binding.elements[s];let n=r[s];if(n!=null){Array.isArray(n)||(n=[n]);for(const o of n)await this.#e(o,i.__bid,i)}}getIntent(t,e){return this.#t[t]?.[e]}register(t,e,s,r=!0){const i=crs.binding.elements[e],n=i.getRootNode();if(t==="change"&&i instanceof HTMLInputElement&&n instanceof ShadowRoot&&n.host.registerEvent!=null&&n.host.registerEvent(n,t,this.#s),this.#t[t]==null&&(document.addEventListener(t,this.#n,{capture:!0,passive:!0}),this.#t[t]={}),r){this.#t[t][e]||=[],this.#t[t][e].push(s);return}this.#t[t][e]=s}clear(t){const e=crs.binding.elements[t];if(e?.__events==null)return;const s=e.__events;for(const r of s)delete this.#t[r][t]}}function l(a){return a.composedPath().filter(t=>t.__uuid!=null)}export{d as EventStore};
